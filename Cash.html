<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cash Payment | DOKKANK</title>
<style>
  body {font-family: Arial, sans-serif; background:#f5f5f5; padding:20px;}
  .container {max-width:400px; margin:50px auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 2px 10px #0002;}
  h2 {text-align:center; margin-bottom:20px;}
  label {display:block; margin-top:10px; font-weight:600;}
  input {width:100%; padding:10px; margin-top:5px; border-radius:5px; border:1px solid #ccc;}
  .amount {background:#eee; padding:10px; margin-top:5px; border-radius:5px;}
  button {margin-top:20px; width:100%; padding:12px; background:#e53935; color:#fff; border:none; border-radius:8px; cursor:pointer; font-size:1rem;}
  button:hover {background:#d32f2f;}
</style>
</head>
<body>

<div class="container">
  <h2>Cash Payment</h2>
  <form id="cashForm">
    <label for="name">Full Name</label>
    <input type="text" id="name" required>

    <label for="phone">Mobile Number</label>
    <input type="text" id="phone" required>

    <label for="address">Address</label>
    <input type="text" id="address" required>

    <label>Amount</label>
    <div class="amount" id="amount">$0.00</div>

    <button type="submit">Confirm Payment</button>
  </form>
</div>

<script>
  // قراءة السلة من localStorage
  let cart = JSON.parse(localStorage.getItem("cartItems")) || [];

  // التأكد من أن كل item فيه price بصيغة صحيحة
  let total = 0;
  cart.forEach(item => {
    // لو السعر مكتوب "$45" أو أي نص، نحوله لرقم
    let price = parseFloat(String(item.price).replace(/[^0-9.]/g, ""));
    if(!isNaN(price)) total += price;
  });

  // عرض المبلغ في الصفحة
  document.getElementById("amount").textContent = "$" + total.toFixed(2);

  // عند الضغط على تأكيد الدفع
  document.getElementById("cashForm").addEventListener("submit", function(e){
    e.preventDefault();
    if(total === 0){
      alert("سلة التسوق فارغة، لا يوجد مبلغ للدفع!");
      return;
    }
    alert("تم تأكيد عملية الشراء! المبلغ المدفوع: $" + total.toFixed(2));
    localStorage.removeItem("cartItems"); // مسح السلة بعد الدفع
    window.location.href = "Cart.html"; // الرجوع لصفحة الكارت
  });
</script>

</body>
</html>
